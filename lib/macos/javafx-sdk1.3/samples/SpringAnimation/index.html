<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
	
	<title>JavaFX Example Code | SpringAnimation | JavaFX Demo</title>
	
	<!--METAS-->
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="description" content="JavaFX" />
	<meta name="keywords" content="JavaFX Oracle [...]" />
	<meta name="author" content="Oracle" />
	
	<!--STYLESHEETS-->
	<link rel="stylesheet" type="text/css" media="screen, projection" href="../shared/new_style/css/reset.css" />
	<link rel="stylesheet" type="text/css" media="screen, projection" href="../shared/new_style/css/javafx.css" />
	<link rel="stylesheet" type="text/css" media="screen, projection" href="../shared/new_style/css/samples.css" />
	
	<!-- CONDITIONAL STYLESHEETS -->
	<!--[if IE]>
		<link rel="stylesheet" type="text/css" href="../shared/new_style/css/ie.css" />
	<![endif]-->
	
	<!--[if IE 6]>
		<link rel="stylesheet" type="text/css" href="../shared/new_style/css/ie6.css" />
	<![endif]-->
	
	<!--[if IE 7]>
		<link rel="stylesheet" type="text/css" href="../shared/new_style/css/ie7.css" />
	<![endif]-->
	
	<!--ADDRESS BAR ICON-->

	<link rel="shortcut icon" type="image/ico" href="../shared/new_style/images/favicon.ico" />
    
	
</head>
<!--
	The ID here is required to indicate the page type.
	Changing this will affect the layout of the page.
-->
<body id="tutorials">
	
	<div id="body">
		<!--
			Header is the main navigation.
			We are using CSS Sprites to apply images across the site, namely the header and subnav.
			
			This has a few implications for you guys, if you want to change the image for selected or hover states,
			you'll find the images embedded next to the header image in the same file. This makes it slightly harder to edit, and
			a lot more difficult to change in the styles, but allows for 1 file and download request which makes it much more performant.
			
			This also means some of the elements that use the sprites have id's that allow us to modify the sprite image based on each element.
			So in header and subnav, we have an id on each LI, these can't be changed or else the image styling will be ruined.
		-->
		<ul id="header" class="see">
			<li id="fx" class="first">
				<h1><a href="http://www.javafx.com/"><span>FX</span></a></h1>
			</li>
			<li id="explore">
				<a href="http://www.javafx.com/about/"><span>Explore</span></a>
			</li>
			<li id="see">
				<a href="http://www.javafx.com/samples/"><span>See</span></a>
			</li>
			<li id="learn">
				<a href="http://www.javafx.com/learn/"><span>Learn</span></a>
			</li>
			<li id="start" class="last">
				<a href="http://www.javafx.com/downloads/"><span>Start</span></a>
			</li>
		</ul>
	

<script src="http://jfx.sfbay.sun.com/hudson//job/1.3.1/label=macosx-universal-soma/101/artifact/artifacts/rt-deployed/dtfx.js"></script><div id="main">
<div class="sidebar">
<a href="../index.html" class="back"><span>Return to See main Page</span></a>
<div class="profile">
<strong>Key Features</strong><em>Animation </em><strong>Skill Level</strong><em>intermediate</em><strong>Last Updated</strong><em>October 19th, 2008</em>
</div>
<dl class="icon-list">
<dt>Share</dt>
<dd>
<a href="http://buzz.yahoo.com/article/http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/yahoo_buzz_icon.png" width="20" height="19" alt="Yahoo Buzz"></a>
</dd>
<dd>
<a href="http://www.facebook.com/share.php?u=http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/facebook_icon.png" width="20" height="17" alt="Facebook"></a>
</dd>
<dd>
<a href="http://www.myspace.com/index.cfm?u=http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/myspace_icon.png" width="20" height="18" alt="Myspace"></a>
</dd>
<dd>
<a href="http://digg.com/submit?phase=3&url=http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/digg_icon.png" width="20" height="18" alt="Digg"></a>
</dd>
<dd>
<a href="http://www.reddit.com/submit?url=http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/reddit_icon.png" width="20" height="18" alt="Reddit"></a>
</dd>
<dd>
<a href="http://del.icio.us/post?url=http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/delicious_icon.png" width="20" height="18" alt="Delicious"></a>
</dd>
<dd>
<a href="http://www.newsvine.com/_tools/seed?popoff=0&u=http://javafx.com/samples/SpringAnimation/"><img src="../shared/new_style/images/newsvine_icon.png" width="20" height="18" alt="Newsvine"></a>
</dd>
</dl>
<dl class="links-list">
<dt>View Source Code</dt><dd><a href='src/SpringDemo.fx.html' target='_blank'>SpringDemo.fx</a></dd>
<dd><a href='src/SpringInterpolator.fx.html' target='_blank'>SpringInterpolator.fx</a></dd>
<dd class="button">
<a class="download-button" href="SpringAnimation.zip"><span>Download Source Code</span></a>
</dd>
</dl>
<div class="profile">
<h4>Profile</h4>
<img src="http://weblogs.java.net/images/people/joshua_marinacci.jpg"><strong>Josh Marinacci</strong>
</div>
<div id="mobile" class="sidebox">
<img src="../shared/mobile_badge.png"></div>
<div id="tv" class="sidebox">
<img src="../shared/tv_badge.png"></div>
</div>
<div id="content">
<div class="content-head">
<h2>Spring Animation Effects With a Custom Interpolator</h2>
<div class="meta">
                       By <a class="author">Josh Marinacci</a>,
                       <span class="date">October 19th, 2008</span>
</div>
</div>
<p>JavaFX provides default interpolators for tween animation, but you can also
create your own for some cool effects. This example shows how to create
a spring interpolator.</p>
<script>
var u10only = '';
var webstartAllowed = '';

if(u10only=='true' && !deployJava.isPlugin2()) {
    document.write("<p class='u10warning'>");
    document.write("This sample needs Java SE 6 Update 10 or higher with Internet Explorer 7+ or FireFox 3+");
    document.write("");
    if(webstartAllowed=='true') {
        document.write(" Please <a href='webstart/SpringAnimation.jnlp'>run this example with Java Webstart<a> instead");
    }
    document.write("</p>");
} else {

    javafx(
        {
            archive: "webstart/SpringAnimation.jar,",
            width: 240,
            height: 320,
            code: "custominterpolator.SpringDemo",
            
            name: "appl"
        } 
    );
}
</script>
<h3>Understanding the Code</h3>
<p>By default an animation is linear, meaning the object being animated moves at
a constant speed. An "ease-in" animation means the objects starts moving slowly
and then speeds up. "Ease-out" is the reverse, with an object starting at normal
speed then slowing down when it nears the end. This behavior is controlled by an
<var class="code-attribute">Interpolator</var> object. JavaFX has default interpolators for
<var class="code-attribute">LINEAR</var>, <var class="code-attribute">EASEIN</var>, <var class="code-attribute">EASEOUT</var>, and ease-in plus
ease-out (<var class="code-attribute">EASEBOTH</var>). However, sometimes you want a different kind
of interpolation. JavaFX enables you to create your own custom interpolators by
subclassing <var class="code-attribute">Interpolator</var> or <var class="code-attribute">SimpleInterpolator</var>. This
example shows you how to create a springlike motion by using a custom
interpolator.</p>
<p>The interpolator itself subclasses <var class="code-attribute">SimpleInterpolator</var> and
implements a single function: <var class="code-attribute">curve</var>. This is the curve of
<var class="code-attribute">t</var> (time) over the length of the animation. By returning different
values of <var class="code-attribute">t</var> as it goes from 0.0 to 1.0 (representing the duration of the animation)
you can create complex interpolation behavior. To create a springlike animation
the code in Figure 1 creates the <var class="code-attribute">SpringInterpolator</var> using the standard
physics spring equation.</p>
<div class="source">
<div class="code-header">Source Code</div>
<pre><b>import</b> javafx.animation.SimpleInterpolator;
<b>import</b> java.lang.Math;

public class SpringInterpolator extends SimpleInterpolator {
    <i class='comment'>// the amplitude of the wave</i>
    <i class='comment'>// controls how far out the object can go from it's final stopping point.</i>
    public-init <b class='keyword'>var</b> <b>amplitude</b>:Number = <span class='number-literal'>1</span>.<span class='number-literal'>0</span>;
    <i class='comment'>// determines the weight of the object</i>
    <i class='comment'>// makes the wave motion go longer and farther</i>
    public-init <b class='keyword'>var</b> <b>mass</b>:Number = <span class='number-literal'>0</span>.<span class='number-literal'>058</span>;
    <i class='comment'>// the stiffness of the wave motion / spring</i>
    <i class='comment'>// makes the motion shorter and more snappy</i>
    public-init <b class='keyword'>var</b> <b>stiffness</b>:Number = <span class='number-literal'>12</span>.<span class='number-literal'>0</span>;
    <i class='comment'>// makes the wave motion be out of phase, so that the object</i>
    <i class='comment'>// doesn't end up on the final resting spot.</i>
    <i class='comment'>// this <b class='keyword'>var</b>iable is usually never changed</i>
    public-init <b class='keyword'>var</b> <b>phase</b>:Number = <span class='number-literal'>0</span>.<span class='number-literal'>0</span>;

    <i class='comment'>// if this should do a normal spring or a bounce motion</i>
    public-init <b class='keyword'>var</b> <b>bounce</b>:Boolean = false;


    <i class='comment'>// internal <b class='keyword'>var</b>iables used for calcuations</i>
    <b class='keyword'>var</b> <b>pulsation</b>:Number;

    init {
        this.pulsation = Math.sqrt(stiffness / mass);
    }


    <i class='comment'>// the actual spring equation</i>
    override public function curve(<b>t</b>: Number) : Number {
        <b class='keyword'>var</b> t<span class='number-literal'>2</span> = -Math.cos(pulsation*t+phase+Math.PI) * (<span class='number-literal'>1</span>-t) * amplitude ;
        <i class='comment'>// use the absolute value of the distance if doing a bounces</i>
        if(bounce) {
            return <span class='number-literal'>1</span>-Math.abs(t<span class='number-literal'>2</span>);
        } else {
            return <span class='number-literal'>1</span>-t<span class='number-literal'>2</span>;
        }
    }
}</pre>
</div>
<p>
<i>Figure 1: <var class="code-attribute">SpringInterpolator.fx</var> Code</i>
</p>
<p>To use a custom interpolator, you must create an instance of it, then use it
in your keyframes with the tween keyword. The code in Figure 2 creates a new
<var class="code-attribute">SpringInterpolator</var> then defines a variable,
<var class="code-attribute">springAnimY</var>. The <var class="code-attribute">springAnim</var> timeline animates the
<var class="code-attribute">springAnimY</var> variable from 0 to 200 over 1.5 seconds. The
<var class="code-attribute">tween spring</var> makes the animation use the spring interpolator
instead of a standard interpolator. Finally the group containing a ball image is
bound to the <var class="code-attribute">springAnimY</var> variable, making it move with the
timeline.</p>
<div class="source">
<div class="code-header">Source Code</div>
<pre>def spring = SpringInterpolator { <b>bounce</b>: false};
<b class='keyword'>var</b> springAnimY = <span class='number-literal'>50</span>;
<b class='keyword'>var</b> springAnim = Timeline {
    <b>keyFrames</b>: [ at(<span class='number-literal'>1</span>.<span class='number-literal'>5</span>s) { springAnimY =&gt; <span class='number-literal'>200</span> tween spring}, ]
};
<i class='comment'>// bind the to the springAnimY <b class='keyword'>var</b>iable which will animate it</i>
<b class='keyword'>var</b> springImage = ImageView {
    <b>translateX</b>: <span class='number-literal'>20</span>
    <b>translateY</b>: bind springAnimY;
    <b>image</b>: Image { <b>url</b>: <span class='string-literal'>"{__DIR__}image/ball.png"</span> }
    <b>onMousePressed</b>:function(<b>e</b>:MouseEvent) {
        springAnim.time = <span class='number-literal'>0</span>s;
        springAnim.play();
    }
};
</pre>
</div>
<p>
<i>Figure 2: <var class="code-attribute">SpringTest.fx</var> Code</i>
</p>
<p>This example actually has two animations, one for spring and one for
bouncing. The bouncing version is exactly the same equation except that it uses
the absolute value of <var class="code-attribute">t</var> to reflect the spring waves. (See the end
of Figure 1) As a result the object appears to bounce off of its endpoint
rather than going past it and coming back. To use this behavior, set the
<var class="code-attribute">bounce</var> variable of the <var class="code-attribute">SpringInterpolator</var> to true.</p>
</div>
</div>		<div id="footer">
			<span class="copy">&copy; 2010, Oracle Corporation and/or its affiliates.</span>
            <ul>
				<li class="first"><a href="http://javafx.com/" target="_blank">English</a></li>
				<li><a href="http://www.sun.com/privacy/index.html" target="_blank">Privacy</a></li>
                <li><a href="http://www.sun.com/termsofuse.jsp" target="_blank">Terms of Use</a></li>
                <li><a href="https://openjfx.dev.java.net/legal/trademarks.txt" target="_blank">Trademarks</a></li>
                <li><a href="http://www.sun.com/software/licensingcenter/" target="_blank">Licensing</a></li>
            </ul>
            <a href="http://www.sun.com/" id="footer_link"><span>Sun.com</span></a>
		</div>
	</div>
    
<!-- BEGIN G9 VARIATION 0 -->
<script language="javascript" type="text/javascript" charset="UTF-8" src="http://www.sun.com/share/op/oo_engine.js"></script>
<script language="javascript" type="text/javascript" charset="UTF-8" src="http://www.sun.com/share/op/oo_conf_en-US.js"></script>
<!-- END G9 VARIATION 0 -->
	
<script src="../shared/new_style/js/omi/s_code_remote.js" type="text/javascript"></script>
</body>

</html>

<!--
	JAVASCRIPT
	At the bottom of the page so that we download and render all the visual elements, before we start handling the javascript. This provides for a faster perceived loading time.
-->

<script type="text/javascript" src="../shared/new_style/js/javafx.js"></script>



